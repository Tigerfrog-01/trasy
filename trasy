     [HttpPost]
     [AllowAnonymous]
     public async Task<IActionResult> Register(RegisterViewModel model)
     {
         if (ModelState.IsValid)
         {
             var user = new ApplicationUser()
             {
                 UserName = model.Email,
                 Email = model.Email,
                 ProfileType = model.ProfileType,
                 DisplayName = model.DisplayName,
                 AvatarImageID = Guid.NewGuid().ToString(),
             };
             var result = await _userManager.CreateAsync(user, model.Password);
             if (result.Succeeded)
             {
                 var token = await _userManager.GenerateEmailConfirmationTokenAsync(user);

                 var confirmationLink = Url.Action("ConfirmEmail", "Accounts", new { userID = user.Id, token = token }, Request.Scheme);

                 var emailDto = new EmailDTO
                 {
                     SendToThisAddress = user.Email,
                     EmailSubject = "Tõesta, et see on sinu email",
                     EmailContent = $"<p>Vajuta <a href='{confirmationLink}'>Siin</a> Selleks, et tõestada see on tõesti sinu ja ainult sinu konto, kui sa ei ole teadlik,et oled teinud konto siis ära klikki, su andmed müüakse muid Hiinase ja Põhja KoreSae, aitäh.</p>"


                 };

                 _emailsServices.SendEmail(emailDto);





                 //HOMEWORK TASK: koosta email kasutajalt pärineva aadressile saatmiseks, kasutaja saab oma postkastist kätte emaili
                 //kinnituslingiga, mille jaoks kasutatakse tokenit. siin tuleb välja kutsuda vastav, uus, emaili saatmise meetod, mis saadab
                 //õige sisuga kirja
             }
             //

